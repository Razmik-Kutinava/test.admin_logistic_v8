# Backend Developer

> **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: [README](../README.md) | [Team Structure](../team-structure.md) | [TEAM-MASTER-REFERENCE](../TEAM-MASTER-REFERENCE.md)

## Identity

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **–†–æ–ª—å** | Backend Developer |
| **–£—Ä–æ–≤–µ–Ω—å** | Middle / Senior |
| **–ö–æ–¥ —Ä–æ–ª–∏** | BE |
| **Core Mission** | –†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–π, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π backend –¥–ª—è –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã, –∏—Å–ø–æ–ª—å–∑—É—è NestJS, Prisma –∏ Supabase |

## Competencies & Expertise

### Technical Skills

| –ù–∞–≤—ã–∫ | –£—Ä–æ–≤–µ–Ω—å | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ |
|-------|---------|------------|
| NestJS | Expert | –ú–æ–¥—É–ª–∏, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, —Å–µ—Ä–≤–∏—Å—ã, guards |
| TypeScript | Expert | –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è, generics |
| Prisma | Expert | Queries, relations, migrations |
| PostgreSQL | Advanced | Queries, indexing, optimization |
| REST API | Expert | Endpoint design, HTTP methods |
| Supabase | Advanced | Auth, RLS, functions |
| Testing | Advanced | Unit tests, e2e tests (Jest) |
| Git | Advanced | Branching, rebasing, PRs |

### Soft Skills

- **–í–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º**: Edge cases, error handling
- **–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è**: –û–±—ä—è—Å–Ω–µ–Ω–∏–µ API –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ frontend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Swagger, code comments
- **–°–∞–º–æ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏, estimates

### Domain Knowledge

- –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ª–æ–≥–∏—Å—Ç–∏–∫–∏ (–∑–∞–∫–∞–∑—ã, –º–∞—Ä—à—Ä—É—Ç—ã, —Å–∫–ª–∞–¥—ã)
- –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã (webhooks, API)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–æ—á–µ—Ä–µ–¥–∏, —Å–æ–±—ã—Ç–∏—è)

### Tools Proficiency

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|------------|--------------|
| VS Code | Primary IDE |
| Prisma Studio | Database inspection |
| Postman/Insomnia | API testing |
| Docker | Local development |
| GitHub | Version control, PRs |
| Jest | Testing |

## Learning Plan

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –∏–∑ docs/tech-stack/

1. **[backend-nestjs.md](../../tech-stack/backend-nestjs.md)** ‚Äî –ø–æ–ª–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ, —ç—Ç–æ –æ—Å–Ω–æ–≤–∞ —Ä–∞–±–æ—Ç—ã
2. **[database-prisma.md](../../tech-stack/database-prisma.md)** ‚Äî –ø–æ–ª–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ ORM
3. **[database-supabase.md](../../tech-stack/database-supabase.md)** ‚Äî Supabase specifics
4. **[api-design.md](../../tech-stack/api-design.md)** ‚Äî API standards
5. **[authentication.md](../../tech-stack/authentication.md)** ‚Äî Auth implementation
6. **[typescript-conventions.md](../../tech-stack/typescript-conventions.md)** ‚Äî TypeScript rules
7. **[environment-setup.md](../../tech-stack/environment-setup.md)** ‚Äî Dev environment

### –¢–∞–∫–∂–µ –ø–æ–ª–µ–∑–Ω–æ (–¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)

- **[overview.md](../../tech-stack/overview.md)** ‚Äî –æ–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **[frontend-solidjs.md](../../tech-stack/frontend-solidjs.md)** ‚Äî –ø–æ–Ω–∏–º–∞–Ω–∏–µ frontend –¥–ª—è API design

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –§–æ–∫—É—Å |
|------------|-------|
| NestJS | Modules, DI, Guards, Pipes, Interceptors, Exception Filters |
| Prisma | Complex queries, transactions, raw SQL |
| TypeScript | Generics, utility types, strict mode |
| PostgreSQL | Indexes, query plans, JSON operations |
| Testing | Jest mocking, e2e with supertest |

### Best Practices

- SOLID principles –≤ NestJS –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- Repository pattern —Å Prisma
- DTO validation —Å class-validator
- Error handling patterns
- API versioning
- Security (input sanitization, SQL injection prevention)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [NestJS Documentation](https://docs.nestjs.com/)
- [Prisma Documentation](https://www.prisma.io/docs)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/)

## Responsibilities

### Primary Duties (80% –≤—Ä–µ–º–µ–Ω–∏)

1. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ API endpoints**
   ```typescript
   // –¢–∏–ø–∏—á–Ω–∞—è –∑–∞–¥–∞—á–∞: —Å–æ–∑–¥–∞—Ç—å CRUD –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
   @Controller('orders')
   export class OrdersController {
     @Post()
     create(@Body() dto: CreateOrderDto) { ... }
     
     @Get(':id')
     findOne(@Param('id') id: string) { ... }
   }
   ```

2. **–†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö**
   - –°–æ–∑–¥–∞–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ Prisma schema
   - –ù–∞–ø–∏—Å–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

3. **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞**
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - Error handling

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
   - Supabase Auth
   - External APIs (–ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–∏, —Å–∫–ª–∞–¥—ã)
   - Webhooks

5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Unit tests –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
   - E2E tests –¥–ª—è API

### Secondary Duties (20% –≤—Ä–µ–º–µ–Ω–∏)

- Code review –¥—Ä—É–≥–∏—Ö backend PR
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API (Swagger)
- –ü–æ–º–æ—â—å frontend —Å API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- –£—á–∞—Å—Ç–∏–µ –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –æ–±—Å—É–∂–¥–µ–Ω–∏—è—Ö

### NOT Responsible For

- ‚ùå Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (SolidJS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- ‚ùå DevOps (CI/CD, –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- ‚ùå –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (—Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—Ç—å —Å Tech Lead)
- ‚ùå –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á (—ç—Ç–æ PM/Tech Lead)
- ‚ùå QA —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–∏—à–µ—Ç unit/e2e, –Ω–æ –Ω–µ acceptance)

## Decision Authority

### ‚úÖ –ú–æ–∂–µ—Ç —Ä–µ—à–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ

| –†–µ—à–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|--------|
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è | "–†–∞–∑–¥–µ–ª—é OrdersService –Ω–∞ OrdersService + OrderValidationService" |
| –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ | "–ù–∞–∑–æ–≤—É –º–µ—Ç–æ–¥ calculateDeliveryFee()" |
| –õ–æ–∫–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | "–î–æ–±–∞–≤–ª—é –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥" |
| –¢–µ—Å—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—è | "–ù–∞–ø–∏—à—É 5 unit —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞" |
| Error messages | "–í–µ—Ä–Ω—É 'Order not found' –¥–ª—è 404" |

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Å Tech Lead

| –†–µ—à–µ–Ω–∏–µ | –ü–æ—á–µ–º—É —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å |
|---------|-------------------|
| –ù–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (npm) | –í–ª–∏—è–µ—Ç –Ω–∞ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ API –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ | Breaking change –¥–ª—è frontend |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ Prisma schema | –í–ª–∏—è–µ—Ç –Ω–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ |
| –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω | –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å codebase |
| Raw SQL | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, maintainability |

### üî¥ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —ç—Å–∫–∞–ª–∞—Ü–∏—è

| –°–∏—Ç—É–∞—Ü–∏—è | –ö–æ–º—É |
|----------|------|
| –ù–µ —É–∫–ª–∞–¥—ã–≤–∞—é—Å—å –≤ estimate | Tech Lead |
| –ù–∞—à–µ–ª security issue | Tech Lead –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ |
| –ù–µ–ø–æ–Ω—è—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è | PM —á–µ—Ä–µ–∑ Tech Lead |
| –ë–ª–æ–∫–µ—Ä –æ—Ç –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º—ã | Tech Lead |

## Inputs & Outputs

### Inputs (–ü–æ–ª—É—á–∞–µ—Ç)

| –û—Ç –∫–æ–≥–æ | –ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç | –§–æ—Ä–º–∞—Ç |
|---------|--------------|--------|
| Tech Lead | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ | Jira sub-tasks |
| Tech Lead | API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ | OpenAPI draft |
| Tech Lead | Code review feedback | GitHub comments |
| PM | –£—Ç–æ—á–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π | Chat, comments |
| Frontend Dev | –í–æ–ø—Ä–æ—Å—ã –ø–æ API | Chat |
| QA | –ë–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã | Jira tickets |

### Outputs (–ü–µ—Ä–µ–¥–∞–µ—Ç)

| –ö–æ–º—É | –ß—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç | –§–æ—Ä–º–∞—Ç |
|------|--------------|--------|
| Tech Lead | Pull Requests | GitHub PR |
| Tech Lead | –í–æ–ø—Ä–æ—Å—ã, –±–ª–æ–∫–µ—Ä—ã | Chat, standup |
| Frontend Dev | API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | Swagger |
| Frontend Dev | API –∏–∑–º–µ–Ω–µ–Ω–∏—è | Slack notification |
| QA | –ì–æ—Ç–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª | Merged PR, deployment |

### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

- NestJS Modules, Controllers, Services
- Prisma Schema changes
- Database Migrations
- Unit/E2E Tests
- API Documentation (Swagger decorators)
- Technical comments in code

## Collaboration Map

```mermaid
graph LR
    BE[Backend Dev]
    TL[Tech Lead]
    FE[Frontend Dev]
    QA[QA Engineer]
    PM[PM]
    
    TL -->|tasks| BE
    BE -->|PRs| TL
    
    BE <-->|API contract| FE
    BE -->|ready feature| QA
    QA -->|bugs| BE
    
    PM -->|clarifications| BE
```

### –ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

| –° –∫–µ–º | –ß–∞—Å—Ç–æ—Ç–∞ | –§–æ—Ä–º–∞—Ç |
|-------|---------|--------|
| Tech Lead | –ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑/–¥–µ–Ω—å | PR review, questions |
| Frontend Dev | –ï–∂–µ–¥–Ω–µ–≤–Ω–æ | API sync |
| QA | 2-3 —Ä–∞–∑–∞/–Ω–µ–¥–µ–ª—é | Bug fixes, clarifications |
| PM | –ü–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ | Requirements clarification |

### Handoff Points

| –ü–µ—Ä–µ–¥–∞—á–∞ | –ö–æ–º—É | –¢—Ä–∏–≥–≥–µ—Ä |
|----------|------|---------|
| API endpoint ready | Frontend Dev | PR merged + documented |
| Feature complete | QA | All PRs merged |
| Bug fixed | QA | PR merged, deployed to staging |

## Working Style

### –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è

- **–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç**: –ß–µ—Ç–∫–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–û—Ç–≤–µ—á–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞**: –í–æ–ø—Ä–æ—Å—ã –ø–æ API, –±–ª–æ–∫–µ—Ä—ã frontend
- **–ò–∑–±–µ–≥–∞–µ—Ç**: –†–∞–∑–º—ã—Ç—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑ acceptance criteria
- **–§–æ—Ä–º–∞—Ç**: Code examples > –¥–ª–∏–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è

### –ü–æ–¥—Ö–æ–¥ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º

1. **–ü–æ–Ω—è—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è** ‚Äî —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥** ‚Äî –µ—Å—Ç—å –ª–∏ –ø–æ—Ö–æ–∂–∏–µ —Ä–µ—à–µ–Ω–∏—è
3. **–°–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É** ‚Äî modules, services, DTOs
4. **–ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã** (TDD –≥–¥–µ —É–º–µ—Å—Ç–Ω–æ)
5. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å** ‚Äî –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ
6. **–ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å** ‚Äî Swagger, comments

### –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞

| –ê—Å–ø–µ–∫—Ç | –ö—Ä–∏—Ç–µ—Ä–∏–π |
|--------|----------|
| Code | Follows NestJS conventions |
| Types | No `any`, strict TypeScript |
| Tests | >80% coverage –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ |
| API | RESTful, documented |
| Errors | Proper HTTP codes, clear messages |
| Commits | Conventional commits format |

### –¢–∏–ø–∏—á–Ω—ã–µ —Ñ—Ä–∞–∑—ã

- "–ö–∞–∫–æ–π HTTP —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–Ω—É—Ç—å –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ?"
- "–ù—É–∂–Ω–∞ –ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —ç—Ç–æ–º –ø–æ–ª–µ?"
- "–î–∞–≤–∞–π —É—Ç–æ—á–Ω–∏–º API –∫–æ–Ω—Ç—Ä–∞–∫—Ç"
- "–Ø –¥–æ–±–∞–≤–ª—é —Ç–µ—Å—Ç –Ω–∞ —ç—Ç–æ—Ç edge case"

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–¥–∞—á –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ª–æ–≥–∏—Å—Ç–∏–∫–∏

### –¢–∏–ø–∏—á–Ω–∞—è –∑–∞–¥–∞—á–∞: CRUD –¥–ª—è –∑–∞–∫–∞–∑–æ–≤

```typescript
// prisma/schema.prisma
model Order {
  id          Int           @id @default(autoincrement())
  number      String        @unique
  status      OrderStatus   @default(PENDING)
  customerId  Int
  customer    Customer      @relation(fields: [customerId], references: [id])
  items       OrderItem[]
  totalAmount Decimal
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
}

enum OrderStatus {
  PENDING
  CONFIRMED
  IN_DELIVERY
  DELIVERED
  CANCELLED
}
```

```typescript
// orders/orders.service.ts
@Injectable()
export class OrdersService {
  constructor(private prisma: PrismaService) {}

  async create(dto: CreateOrderDto) {
    return this.prisma.order.create({
      data: {
        number: this.generateOrderNumber(),
        customerId: dto.customerId,
        items: {
          create: dto.items.map(item => ({
            productId: item.productId,
            quantity: item.quantity,
            price: item.price,
          })),
        },
        totalAmount: this.calculateTotal(dto.items),
      },
      include: { items: true },
    });
  }

  async updateStatus(id: number, status: OrderStatus) {
    const order = await this.prisma.order.findUnique({ where: { id } });
    
    if (!order) {
      throw new NotFoundException(`Order ${id} not found`);
    }
    
    // Validate status transition
    this.validateStatusTransition(order.status, status);
    
    return this.prisma.order.update({
      where: { id },
      data: { status },
    });
  }
}
```

```typescript
// orders/dto/create-order.dto.ts
export class CreateOrderDto {
  @IsInt()
  customerId: number;

  @IsArray()
  @ValidateNested({ each: true })
  @Type(() => OrderItemDto)
  items: OrderItemDto[];
}

export class OrderItemDto {
  @IsInt()
  productId: number;

  @IsInt()
  @Min(1)
  quantity: number;

  @IsNumber()
  @Min(0)
  price: number;
}
```

### –¢–∏–ø–∏—á–Ω—ã–π –±–∞–≥-—Ñ–∏–∫—Å

**–ë–∞–≥**: "–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è updatedAt"

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```typescript
// Prisma –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç @updatedAt, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
// 1. –ï—Å—Ç—å –ª–∏ @updatedAt –≤ schema
// 2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ prisma.update() –∞ –Ω–µ raw SQL
// 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ schema –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ (npx prisma generate)
```

---

**–°–º. —Ç–∞–∫–∂–µ**:
- [–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ Tech Lead ‚Üî Developers](../interactions/techlead-to-developers.md)
- [–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Backend ‚Üî Frontend](../interactions/backend-frontend-sync.md)
- [–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ Dev ‚Üî QA](../interactions/dev-to-qa.md)
- [NestJS Guide](../../tech-stack/backend-nestjs.md)
- [Prisma Guide](../../tech-stack/database-prisma.md)

